---
- name: bootstrap ansible
  hosts: all
  gather_facts: false
  become: true
  tasks:
    - set_fact:
        timestamp: '{{ ansible_date_time.year }}{{ ansible_date_time.month }}{{ ansible_date_time.day }}'
    - name: install python for ansible
      package:
        name: python-minimal
        state: latest
      ignore_errors: yes
      changed_when: false
    - name: install packages for ansible
      package:
        name: python3-dnf
        state: latest
      ignore_errors: yes
      changed_when: false
- name: configure servers
  hosts: sandbox
  roles:
    - root
    - user
    - security
    - general
- name: set up kafka
  hosts: kafka
  roles:
    - root
    - user
    - security
    - kafka
- name: set up vagrant
  hosts: kafka
  roles:
    - root
    - user
